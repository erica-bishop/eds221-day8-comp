---
title: "Data Visualization"
author: "Erica Bishop"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
library(tidyverse)
library(here)
library(janitor)
library(patchwork)
library(ggrepel)
library(gghighlight)
library(paletteer)
library(ggExtra)
library(ggbeeswarm)
library(gapminder)
#library(sf)
```

### Read in Lizard data

```{r}
lizards <- read_csv(here("data_tidy", "lizards.csv"))

```
```{r}
#plot total length vs weight

ggplot(data = lizards, aes(x = total_length,
                           y = weight)) +
  geom_jitter(size = 0.5, color = "darkcyan")


```
Now create a histogram of total lengths for all lizards in data set

```{r}
ggplot(data = lizards, aes(x = total_length)) +
  geom_histogram(color = "white", 
                 fill = "darkcyan", 
                 bins = 15,
                 size = 0.5,
                 linetype = "dotdash")

#there are rules around trying to determine optimal number of bins based on sample size, i.e. 2n^(1/3)
#color refers to bounding lines, straight lines, and pints. fill maps to any bounded areas
# when changing elements based on a constant, don't put within aes() - only aesthetics mapped on to a variable should be within aes()

```


```{r}
ggplot(data = lizards, aes(x = total_length,
                          y = weight)) +
  geom_point(
    shape = 18,
    fill = "deeppink1",
    alpha = 0.5,
    size = 3.0,
    color = "darkcyan"
  )


```

```{r}
ggplot(data = lizards, aes(x = total_length,
                          y = weight)) +
  geom_point(aes(color = common_name,
                 size = total_length),
             alpha = 0.5) +
  theme_minimal()



```


```{r}
ggplot(data = lizards, aes(x = total_length,
                          y = weight)) +
  geom_point() +
  facet_wrap(~common_name,
             scales = "free")
#be carefule with scales = free - this makes it hardto compare across faceted plots. default is to keep scales all the same which is a GOOD thing

```
```{r}

lizard_count_by_species <- lizards |> 
  group_by(common_name) |> 
  summarize(count = n())

#group by summarize is great if you want to look at multiple outputs in a summary table
#but to just look at counts its easier to use count()

lizard_counts <- lizards |> 
  count(common_name)

#can add more variables to count() argument

```

Now make a graph to show counts by species (can use geom_col or geom_bar)

```{r}
ggplot(data = lizard_counts, aes(y = common_name,
                                 x = n)) +
  geom_col()

#can't manually specify the order of character variables, so convert to a factor in order to specify order, can use {forcats}
#also shouldn't manually specify order in case data changes or is updated

```
using `{forcats}`

```{r}

ggplot(data = lizard_counts, aes(y = fct_reorder(common_name, n),
                                 x = n)) +
  geom_col()

```
Create a scatterplot faceted by species for total length v. weight. Differ color and shape of points based on species (common name). change the theme and make each faceted panel have flexible axis limits (scale = free)

```{r}
ggplot(data = lizards, aes(x = total_length,
                           y = weight)) +
  geom_point(aes(color = common_name)) +
  facet_wrap(~common_name,
             scales = "free") +
  theme_minimal() +
  labs(x = "Total length (mm)",
       y = "Weight (g)",
       title = "Jornada Basin Lizard Sizes",
       subtitle = "All lizards follow the standard length-weight relationship, with Western Whiptails being largest",
       caption = "data credit")




```

















